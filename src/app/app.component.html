<section class="sample-app-content">
  <h1>Solicitud de Cambios T-Systems-KOF</h1>
  <form [formGroup]="form" (ngSubmit)="onSubmitModelBased()">
    <div class="grid grid-cols-12 gap-2">
      <!-- Fecha de comite -->
      <div class="col-span-12">
        <mat-form-field appearance="outline">
          <mat-label>Choose a date</mat-label>
          <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker" formControlName="comitteDay">
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>

      <!-- Datos del promotor -->
      <div class="col-span-12">
        <div class="grid grid-cols-12 gap-2">
          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Promotor del cambio </mat-label>
              <input matInput type="text" formControlName="changePromoter">
            </mat-form-field>
          </div>

          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Correo del promotor: </mat-label>
              <input matInput type="email" formControlName="changePromoterEmail">
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Datos del servicio -->
      <div class="col-span-12">
        <div class="grid grid-cols-12 gap-2">
          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Servicio</mat-label>
              <input matInput type="text" formControlName="service">
            </mat-form-field>
          </div>

          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Dueno del servicio</mat-label>
              <textarea matInput formControlName="serviceOwner"></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Descripcion corta -->
      <div class="col-span-12">
        <div class="grid grid-cols-12 gap-2">
          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Descripcion corta</mat-label>
              <input matInput type="text" formControlName="shortDescription">
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Descripcion -->
      <div class="col-span-12">
        <div class="grid grid-cols-12 gap-2">
          <div class="col-span-6">
            <mat-form-field appearance="outline" class="w-3/4">
              <mat-label>Descripcion</mat-label>
              <textarea matInput formControlName="description"></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Horario inicio/fin -->
      <div class="col-span-12">
        <div class="grid grid-cols-12 gap-2">
          <div class="col-span-6">
            <div class="grid grid-cols-12 gap-2">
              <mat-form-field appearance="outline" class="col-span-5">
                <mat-label>Fecha de inicio</mat-label>
                <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="startDatePicker"
                  formControlName="startDate">
                <mat-hint>DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #startDatePicker></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-5">
                <mat-label>Hora de inicio</mat-label>
                <input matInput [ngxMatTimepicker]="timePicker" formControlName="startTime">
                <ngx-mat-timepicker #timePicker></ngx-mat-timepicker>
              </mat-form-field>
            </div>
          </div>

          <div class="col-span-6">
            <div class="grid grid-cols-12 gap-2">
              <mat-form-field appearance="outline" class="col-span-5">
                <mat-label>Fecha de fin</mat-label>
                <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="endDatePicker" formControlName="endDate">
                <mat-hint>DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #endDatePicker></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-5">
                <mat-label>Hora de fin</mat-label>
                <input matInput [ngxMatTimepicker]="endTimePicker" formControlName="endTime" class="w-full">
                <ngx-mat-timepicker #endTimePicker></ngx-mat-timepicker>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>

      <div class="col-span-12">
        <div formArrayName="activities" class="grid grid-cols-12 gap-2">
          @for(item of activities.controls; track item; let index = $index) {
          <div [formGroupName]="index" class="col-span-12">
            <div class="grid grid-cols-12 gap-2">
              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Actividad</mat-label>
                <textarea matInput formControlName="name"></textarea>
              </mat-form-field>


              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Fecha de inicio</mat-label>
                <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="startActivityDatePicker"
                  formControlName="startDate">
                <mat-hint>DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="startActivityDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #startActivityDatePicker></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-1">
                <mat-label>Hora de inicio</mat-label>
                <input matInput [ngxMatTimepicker]="startActivityTimePicker" formControlName="startTime" class="w-full">
                <ngx-mat-timepicker #startActivityTimePicker></ngx-mat-timepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Fecha de fin</mat-label>
                <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="endActivityDatePicker"
                  formControlName="endDate">
                <mat-hint>DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="endActivityDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #endActivityDatePicker></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-1">
                <mat-label>Hora de fin</mat-label>
                <input matInput [ngxMatTimepicker]="endActivityTimePicker" formControlName="endTime" class="w-full">
                <ngx-mat-timepicker #endActivityTimePicker></ngx-mat-timepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Duracion </mat-label>
                <input matInput type="text" formControlName="duration">
              </mat-form-field>

              <button type="button" mat-icon-button matTooltip="Warn" color="warn"
              class="col-span-1"
                (click)="deleteActivity(index)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
          }
          <button type="button" (click)="addActivity()">Add Sub-Item</button>
        </div>
      </div>

      <button mat-button>Basic</button>
    </div>
  </form>
</section>
